{"ast":null,"code":"function round(number, digits = 0, base = 10 ** digits) {\n  return Math.round(base * number) / base;\n}\n\nfunction hslaToHsva({\n  h,\n  s,\n  l,\n  a\n}) {\n  const ss = s * ((l < 50 ? l : 100 - l) / 100);\n  return {\n    h,\n    s: ss > 0 ? 2 * ss / (l + ss) * 100 : 0,\n    v: l + ss,\n    a\n  };\n}\n\nconst angleUnits = {\n  grad: 360 / 400,\n  turn: 360,\n  rad: 360 / (Math.PI * 2)\n};\n\nfunction parseHue(value, unit = \"deg\") {\n  return Number(value) * (angleUnits[unit] || 1);\n}\n\nconst HSL_REGEXP = /hsla?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i;\n\nfunction parseHsla(color) {\n  const match = HSL_REGEXP.exec(color);\n\n  if (!match) {\n    return {\n      h: 0,\n      s: 0,\n      v: 0,\n      a: 1\n    };\n  }\n\n  return hslaToHsva({\n    h: parseHue(match[1], match[2]),\n    s: Number(match[3]),\n    l: Number(match[4]),\n    a: match[5] === void 0 ? 1 : Number(match[5]) / (match[6] ? 100 : 1)\n  });\n}\n\nfunction rgbaToHsva({\n  r,\n  g,\n  b,\n  a\n}) {\n  const max = Math.max(r, g, b);\n  const delta = max - Math.min(r, g, b);\n  const hh = delta ? max === r ? (g - b) / delta : max === g ? 2 + (b - r) / delta : 4 + (r - g) / delta : 0;\n  return {\n    h: round(60 * (hh < 0 ? hh + 6 : hh)),\n    s: round(max ? delta / max * 100 : 0),\n    v: round(max / 255 * 100),\n    a\n  };\n}\n\nfunction parseHex(color) {\n  const hex = color[0] === \"#\" ? color.slice(1) : color;\n\n  if (hex.length === 3) {\n    return rgbaToHsva({\n      r: parseInt(hex[0] + hex[0], 16),\n      g: parseInt(hex[1] + hex[1], 16),\n      b: parseInt(hex[2] + hex[2], 16),\n      a: 1\n    });\n  }\n\n  return rgbaToHsva({\n    r: parseInt(hex.slice(0, 2), 16),\n    g: parseInt(hex.slice(2, 4), 16),\n    b: parseInt(hex.slice(4, 6), 16),\n    a: 1\n  });\n}\n\nconst RGB_REGEXP = /rgba?\\(?\\s*(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i;\n\nfunction parseRgba(color) {\n  const match = RGB_REGEXP.exec(color);\n\n  if (!match) {\n    return {\n      h: 0,\n      s: 0,\n      v: 0,\n      a: 1\n    };\n  }\n\n  return rgbaToHsva({\n    r: Number(match[1]) / (match[2] ? 100 / 255 : 1),\n    g: Number(match[3]) / (match[4] ? 100 / 255 : 1),\n    b: Number(match[5]) / (match[6] ? 100 / 255 : 1),\n    a: match[7] === void 0 ? 1 : Number(match[7]) / (match[8] ? 100 : 1)\n  });\n}\n\nconst VALIDATION_REGEXP = {\n  hex: /^#?([0-9A-F]{3}){1,2}$/i,\n  rgb: /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/i,\n  rgba: /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/i,\n  hsl: /hsl\\(\\s*(\\d+)\\s*,\\s*(\\d+(?:\\.\\d+)?%)\\s*,\\s*(\\d+(?:\\.\\d+)?%)\\)/i,\n  hsla: /^hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*(\\d*(?:\\.\\d+)?)\\)$/i\n};\nconst CONVERTERS = {\n  hex: parseHex,\n  rgb: parseRgba,\n  rgba: parseRgba,\n  hsl: parseHsla,\n  hsla: parseHsla\n};\n\nfunction isColorValid(color) {\n  for (const [, regexp] of Object.entries(VALIDATION_REGEXP)) {\n    if (regexp.test(color)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction parseColor(color) {\n  if (typeof color !== \"string\") {\n    return {\n      h: 0,\n      s: 0,\n      v: 0,\n      a: 1\n    };\n  }\n\n  if (color === \"transparent\") {\n    return {\n      h: 0,\n      s: 0,\n      v: 0,\n      a: 0\n    };\n  }\n\n  const trimmed = color.trim();\n\n  for (const [rule, regexp] of Object.entries(VALIDATION_REGEXP)) {\n    if (regexp.test(trimmed)) {\n      return CONVERTERS[rule](trimmed);\n    }\n  }\n\n  return {\n    h: 0,\n    s: 0,\n    v: 0,\n    a: 1\n  };\n}\n\nexport { isColorValid, parseColor, parseHex, parseHsla, parseHue, parseRgba, round };","map":{"version":3,"sources":["../../../src/ColorPicker/converters/parsers.ts"],"names":[],"mappings":"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","sourcesContent":["import { HsvaColor, RgbaColor, ColorFormat } from '../types';\n\nexport function round(number: number, digits = 0, base = 10 ** digits) {\n  return Math.round(base * number) / base;\n}\n\nfunction hslaToHsva({ h, s, l, a }): HsvaColor {\n  const ss = s * ((l < 50 ? l : 100 - l) / 100);\n\n  return {\n    h,\n    s: ss > 0 ? ((2 * ss) / (l + ss)) * 100 : 0,\n    v: l + ss,\n    a,\n  };\n}\n\nconst angleUnits: Record<string, number> = {\n  grad: 360 / 400,\n  turn: 360,\n  rad: 360 / (Math.PI * 2),\n};\n\nexport function parseHue(value: string, unit = 'deg') {\n  return Number(value) * (angleUnits[unit] || 1);\n}\n\nconst HSL_REGEXP =\n  /hsla?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i;\n\nexport function parseHsla(color: string): HsvaColor {\n  const match = HSL_REGEXP.exec(color);\n\n  if (!match) {\n    return { h: 0, s: 0, v: 0, a: 1 };\n  }\n\n  return hslaToHsva({\n    h: parseHue(match[1], match[2]),\n    s: Number(match[3]),\n    l: Number(match[4]),\n    a: match[5] === undefined ? 1 : Number(match[5]) / (match[6] ? 100 : 1),\n  });\n}\n\nfunction rgbaToHsva({ r, g, b, a }: RgbaColor): HsvaColor {\n  const max = Math.max(r, g, b);\n  const delta = max - Math.min(r, g, b);\n\n  const hh = delta\n    ? max === r\n      ? (g - b) / delta\n      : max === g\n      ? 2 + (b - r) / delta\n      : 4 + (r - g) / delta\n    : 0;\n\n  return {\n    h: round(60 * (hh < 0 ? hh + 6 : hh)),\n    s: round(max ? (delta / max) * 100 : 0),\n    v: round((max / 255) * 100),\n    a,\n  };\n}\n\nexport function parseHex(color: string): HsvaColor {\n  const hex = color[0] === '#' ? color.slice(1) : color;\n\n  if (hex.length === 3) {\n    return rgbaToHsva({\n      r: parseInt(hex[0] + hex[0], 16),\n      g: parseInt(hex[1] + hex[1], 16),\n      b: parseInt(hex[2] + hex[2], 16),\n      a: 1,\n    });\n  }\n\n  return rgbaToHsva({\n    r: parseInt(hex.slice(0, 2), 16),\n    g: parseInt(hex.slice(2, 4), 16),\n    b: parseInt(hex.slice(4, 6), 16),\n    a: 1,\n  });\n}\n\nconst RGB_REGEXP =\n  /rgba?\\(?\\s*(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i;\n\nexport function parseRgba(color: string): HsvaColor {\n  const match = RGB_REGEXP.exec(color);\n\n  if (!match) {\n    return { h: 0, s: 0, v: 0, a: 1 };\n  }\n\n  return rgbaToHsva({\n    r: Number(match[1]) / (match[2] ? 100 / 255 : 1),\n    g: Number(match[3]) / (match[4] ? 100 / 255 : 1),\n    b: Number(match[5]) / (match[6] ? 100 / 255 : 1),\n    a: match[7] === undefined ? 1 : Number(match[7]) / (match[8] ? 100 : 1),\n  });\n}\n\nconst VALIDATION_REGEXP: Record<ColorFormat, RegExp> = {\n  hex: /^#?([0-9A-F]{3}){1,2}$/i,\n  rgb: /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/i,\n  rgba: /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/i,\n  hsl: /hsl\\(\\s*(\\d+)\\s*,\\s*(\\d+(?:\\.\\d+)?%)\\s*,\\s*(\\d+(?:\\.\\d+)?%)\\)/i,\n  hsla: /^hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*(\\d*(?:\\.\\d+)?)\\)$/i,\n};\n\nconst CONVERTERS: Record<ColorFormat, (color: string) => HsvaColor> = {\n  hex: parseHex,\n  rgb: parseRgba,\n  rgba: parseRgba,\n  hsl: parseHsla,\n  hsla: parseHsla,\n};\n\nexport function isColorValid(color: string) {\n  // eslint-disable-next-line no-restricted-syntax\n  for (const [, regexp] of Object.entries(VALIDATION_REGEXP)) {\n    if (regexp.test(color)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function parseColor(color: string): HsvaColor {\n  if (typeof color !== 'string') {\n    return { h: 0, s: 0, v: 0, a: 1 };\n  }\n\n  if (color === 'transparent') {\n    return { h: 0, s: 0, v: 0, a: 0 };\n  }\n\n  const trimmed = color.trim();\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const [rule, regexp] of Object.entries(VALIDATION_REGEXP)) {\n    if (regexp.test(trimmed)) {\n      return CONVERTERS[rule](trimmed);\n    }\n  }\n\n  return { h: 0, s: 0, v: 0, a: 1 };\n}\n"]},"metadata":{},"sourceType":"module"}